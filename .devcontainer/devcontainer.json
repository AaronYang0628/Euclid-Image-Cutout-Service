{
  "name": "Euclid Image Cutout Service",
  "dockerFile": "Dockerfile",
  "context": "..",
  // å®¹å™¨é…ç½®
  "workspaceFolder": "/workspace",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",
  // ç«¯å£è½¬å‘
  "forwardPorts": [
    5000,
    8000
  ],
  "portsAttributes": {
    "5000": {
      "label": "Flask App",
      "onAutoForward": "notify"
    },
    "8000": {
      "label": "MCP SSE Server",
      "onAutoForward": "notify"
    }
  },
  // å®¹å™¨è¿è¡Œé€‰é¡¹
  "runArgs": [
    "--name=euclid-dev",
    // å¦‚æœéœ€è¦ GPU æ”¯æŒï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Š
    // "--gpus=all",
    // æŒ‚è½½æ•°æ®ç›®å½•ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
    // å¦‚æœæœ‰ Euclid æ•°æ®ï¼ŒæŒ‚è½½æ•°æ®ç›®å½•
    "-v",
    "/media/aaron/DATA/astro+euclid/mirror/euclid_q1_102042:/data/euclid"
  ],
  // ç¯å¢ƒå˜é‡
  "containerEnv": {
    "PYTHONUNBUFFERED": "1",
    "PYTHONPATH": "/workspace",
    "FLASK_ENV": "development",
    "FLASK_DEBUG": "1"
  },
  // å®¹å™¨åˆ›å»ºåæ‰§è¡Œçš„å‘½ä»¤
  "postCreateCommand": "pip install -r requirements.txt && npm install -g @anthropic-ai/claude-code && mkdir -p /workspace/outputs /workspace/cache /workspace/tmp /workspace/data",
  // VS Code æ‰©å±•
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.black-formatter",
        "ms-python.flake8",
        "ms-python.isort",
        "ms-toolsai.jupyter",
        "redhat.vscode-yaml",
        "ms-azuretools.vscode-docker",
        "eamodio.gitlens",
        "GitHub.copilot"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": false,
        "python.linting.flake8Enabled": true,
        "python.formatting.provider": "black",
        "python.formatting.blackArgs": [
          "--line-length",
          "100"
        ],
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.organizeImports": "explicit"
        },
        "files.exclude": {
          "**/__pycache__": true,
          "**/*.pyc": true,
          "**/.pytest_cache": true,
          "**/outputs": true,
          "**/cache": true,
          "**/tmp": true
        },
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },
  // å®¹å™¨ç”¨æˆ·
  "remoteUser": "root",
  // ç”Ÿå‘½å‘¨æœŸè„šæœ¬
  "postStartCommand": "echo 'ğŸš€ Euclid Image Cutout Service Dev Container Ready!' && echo 'ğŸ“¡ Flask: http://localhost:5000' && echo 'ğŸ“¡ MCP: http://localhost:8000'",
  // åŠŸèƒ½ç‰¹æ€§
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "installOhMyZsh": true,
      "upgradePackages": false
    }
  },
  // æŒ‚è½½ç‚¹
  "mounts": [
    "source=${localWorkspaceFolder}/.git,target=/workspace/.git,type=bind,consistency=cached"
  ]
}